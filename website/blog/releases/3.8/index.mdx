---
title: Docusaurus 3.8
authors: [slorber]
tags: [release]
image: ./img/social-card.png
date: 2025-05-26
---

We are happy to announce **Docusaurus 3.8**.

This release improves build performance, includes new features and introduces "future flags" to prepare your site for the upcoming Docusaurus 4.

Upgrading should be easy. Our [release process](/community/release-process) respects [Semantic Versioning](https://semver.org/). Minor versions do not include any breaking changes.

![Docusaurus blog post social card](./img/social-card.png)

{/* truncate */}

import BrowserWindow from '../../../src/components/BrowserWindow';
import IframeWindow from '@site/src/components/BrowserWindow/IframeWindow';

## V4 Future Flags

The v4 Future Flags let you opt-in for upcoming Docusaurus v4 breaking changes. This permits you to gradually prepare your site to the next version ahead of time, by handling each breaking change one at a time. By turning on all the v4 future flags, it will become easier to upgrade to Docusaurus v4 once we release it.

:::info not invented here

The concept of Future Flags is not our invention. It has been popularized in the Remix community. You can read more about this gradual feature adoption strategy here:

- [Gradual Feature Adoption with Future Flags](https://remix.run/docs/en/main/guides/api-development-strategy)
- [Future Proofing Your Remix App](https://remix.run/blog/future-flags)

:::

:::tip Turn all v4 future flags on

We recommend to turn all the v4 future flags on at once with the following shortcut:

```js
const config = {
  future: {
    // highlight-next-line
    v4: true,
  },
};
```

This way, you are sure to always keep your site prepared for v4.

In practice, this also means that you may inadvertently turn on a new future flag when upgrading to the next minor version, and requires you to read carefully our upcoming release blog posts. We plan to introduce more future flags in the next minor versions, that may break your site.

:::

### CSS Cascade Layers

In Docusaurus v4, we plan to leverage [CSS Cascade Layers](https://css-tricks.com/css-cascade-layers/). This modern CSS feature is wdely supported and permits to group CSS rules by specificity layers. In [#11142](https://github.com/facebook/docusaurus/pull/11142), we implemented a new experimental [`@docusaurus/plugin-css-cascade-layers`](/docs/api/plugins/@docusaurus/plugin-css-cascade-layers) that you can turn on through the `v4.useCssCascadeLayers` flag if you use the classic preset:

```js
export default {
  future: {
    v4: {
      // highlight-next-line
      useCssCascadeLayers: true,
    },
  },
};
```

We consider this feature as a breaking change because it can slightly alter the CSS rules application order in customized sites, but these issues are usually easy to fix (see for example the [React Native CSS changes](https://github.com/facebook/react-native-website/pull/4607)). Sites that do not provide custom CSS and do not swizzle any component should not be affected.

In practice, it permits to automatically apply built-in CSS Cascade Layer to all the CSS we provide, including our opinionated CSS framework [Infima](https://infima.dev/):

```css
@layer docusaurus.infima {
  h1 {
    /* Infima css rules */
  }
  pre {
    /* Infima css rules */
  }
  code {
    /* Infima css rules */
  }
}
```

This feature is particularly useful to give you more control over the CSS cascade. It makes the CSS rules less dependent on complex selector specificity, and the rules insertion order (which is not always predictable, depending on bundler and CSS optimizations). Your un-layered rules will now always override the layered CSS we provide.

More importantly, it helps solves our long-standing issue of [Global CSS pollution](https://github.com/facebook/docusaurus/issues/6032). Our built-in global CSS rules may conflict with yours, making it harder to use Docusaurus to create playgrounds, demos and embedded widgets. Thankfully, [CSS Cascade Layers can be reverted](https://mayank.co/blog/revert-layer/) to create HTML subtrees that are not affected by the CSS Docusaurus provides.

<details>
  <summary>Reverting layers</summary>

As the [issue](https://github.com/facebook/docusaurus/pull/11142) and [blog post](https://mayank.co/blog/revert-layer/) explain, it is possible to revert layers to isolate an HTML subtree from the CSS that come from this layer.

In practice, you can create a `.my-playground` class to revert the global CSS coming from Infima:

```css
/* The "impossible" :not() selector helps increase the specificity */
.my-playground:not(#a#b) {
  &,
  * {
    @layer docusaurus.infima {
      all: revert-layer;
    }
  }
}
```

And then you can apply this class to to any HTML element, so that Infima doesn't apply to any of its children.

<IframeWindow url="/tests/pages/style-isolation?docusaurus-data-navbar=false" />

</details>

### `postBuild` change

In [#10850](https://github.com/facebook/docusaurus/pull/10850), we are removing the `head` attribute from the plugin `postBuild({head})` lifecycle. This bre

This legacy data structure is coming from our [react-helmet-async](https://github.com/staylor/react-helmet-async) dependency should have never been exposed in the first place. It is not serializable, which prevents us from implementing

- [#10871](https://github.com/facebook/docusaurus/pull/10871) refactor(create-docusaurus): add `future.v4` flag to init templates ([@slorber](https://github.com/slorber))
- [#10850](https://github.com/facebook/docusaurus/pull/10850) feat(core): new `postBuild({routesBuildMetadata})` API, deprecate `head` attribute + v4 future flag ([@slorber](https://github.com/slorber))

## Performance

As announced, this release significantly improves our infrastructure performance with various optimizations, and 2 new Docusaurus Faster options.

### Docusaurus Faster

[Docusaurus Faster](https://github.com/facebook/docusaurus/issues/10556) has been introduced in [Docusaurus v3.6](/blog/releases/3.6#docusaurus-faster), and permits you to opt-in for an upgraded build infrastructure. The experimental flags can be turned on individually, but we recommend to turn all the flags on at once with this convenient shortcut:

```js
const config = {
  future: {
    // highlight-next-line
    experimental_faster: true,
  },
};
```

:::tip

Don't forget to install the `@docusaurus/faster` dependency first!

:::

#### Persistent Cache

In [#10931](https://github.com/facebook/docusaurus/pull/10931), we have enabled the **[Rspack persitent cache](https://rspack.dev/blog/announcing-1-2#persistent-cache)**. Similarly to the [Webpack persistent cache](https://webpack.js.org/blog/2020-10-10-webpack-5-release/#persistent-caching) (that we already supported), it permits to build your site faster on subsequent builds, greatly reducing the time it takes to bundle the app. This feature depends on using the [Rspack bundler](https://rspack.dev/), and can be turned on with the `rspackPersistentCache` flag:

```js
const config = {
  future: {
    experimental_faster: {
      // highlight-start
      rspackBundler: true, // required flag
      rspackPersistentCache: true, // new flag
      // highlight-end
    },
  },
};
```

:::caution Preserve the cache

The persistent cache requires preserving the `./node_modules/.cache` folder across builds.

Popular CDNs such as Netlify and Vercel do that for you automatically. Depending on your CI and deployment pipeline, additional configuration may be needed to preserve the cache.

It should work by default locally. In case you encounter any problem, running the `docusaurus clear` command will clear the `./node_modules/.cache` folder.

:::

#### Worker Threads

In [#10826](https://github.com/facebook/docusaurus/pull/10826), we introduced a [Node.js Worker Thread pool](https://github.com/tinylibs/tinypool) to run the static side generation code. Unlike our traditional strategy, this permits to better leverage all the available CPUs, reduce static site generation times, and contain potential memory leaks. This feature can be turned on with the `ssgWorkerThreads` flag:

```js
const config = {
  future: {
    experimental_faster: {
      // highlight-next-line
      ssgWorkerThreads: true,
    },
  },
};
```

### Optimizations

We have also optimized various bottlenecks:

In [#11007](https://github.com/facebook/docusaurus/pull/11007), we optimized the dev server startup time for macOS users. We figured out that the code to open your browser used expensive synchronous/blocking calls that prevented the bundler from doing its work. From now on, the bundler and the macOS browser opening will run in parallel, leading to a faster `docusaurus start` experience for all macOS users.

In [#11163](https://github.com/facebook/docusaurus/pull/11163), we noticed that the docs `showLastUpdateAuthor` and `showLastUpdateTime` are quite expensive, and require to run a `git log` command for each document. On large sites, running these commands in parallel can exhaust the system and lead to Node.js `EBADF` errors. We implemented a Git command queue to avoid exhausting the system, which also slightly increased performance of our plugin's `loadContent()` lifecycle.

In [#10885](https://github.com/facebook/docusaurus/pull/10885), we implemented an SVG sprite for the external link icon. Due to its repeated appearance in various places of your site (navbar, footer, sidebars...), using a React SVG component lead to duplicated SVG markup in the final HTML. Using a sprite permits to only embed the icon SVG once, reducing the generated HTML size and the static generation time. We [plan to use more SVG sprites](https://github.com/facebook/docusaurus/issues/5865) in the future.

In [#11176](https://github.com/facebook/docusaurus/pull/11176), we fine-tuned the webpack/Rspack configuration to remove useless optimizations. If you have a very large site and bundling time is a concern, you might consider disabling other optimizations like `optimization.concatenateModule`. Refer to the linked issue for instructions and information on the tradeoffs involved.

---

## Maintenance

- [#11168](https://github.com/facebook/docusaurus/pull/11168) chore: add Node 24 to CI + fix deprecation warnings ([@slorber](https://github.com/slorber))
- [#10969](https://github.com/facebook/docusaurus/pull/10969) chore: add `eslint-plugin-react-compiler` ([@slorber](https://github.com/slorber))
- [#10966](https://github.com/facebook/docusaurus/pull/10966) chore: upgrade monorepo to TS 5.8 ([@slorber](https://github.com/slorber))

---

- [#11014](https://github.com/facebook/docusaurus/pull/11014) fix(ideal-image): Internalize `react-waypoint` dependency, fix React 19 compatibility ([@slorber](https://github.com/slorber))
- [#10958](https://github.com/facebook/docusaurus/pull/10958) fix(create-docusaurus): fix CLI and remove shelljs escapeShellArg util ([@slorber](https://github.com/slorber))
- [#11037](https://github.com/facebook/docusaurus/pull/11037) refactor(core): remove clean-webpack-plugin ([@slorber](https://github.com/slorber))
- [#10956](https://github.com/facebook/docusaurus/pull/10956) refactor: remove `react-dev-utils` (CRA) dependency, internalize code ([@slorber](https://github.com/slorber))
- [#11010](https://github.com/facebook/docusaurus/pull/11010) refactor(ideal-image-plugin): internalize legacy component code ([@slorber](https://github.com/slorber))
- `docusaurus-theme-classic`, `docusaurus-theme-common`, `docusaurus-theme-mermaid`, `docusaurus-theme-search-algolia`
- [#10358](https://github.com/facebook/docusaurus/pull/10358) refactor: replace unmaintained shelljs dependency by execa ([@OzakIOne](https://github.com/OzakIOne))
- [#11138](https://github.com/facebook/docusaurus/pull/11138) refactor(content-blog): replace `reading-time` with `Intl.Segmenter` API ([@shreedharbhat98](https://github.com/shreedharbhat98))

## Code Block Refactor

- [#11077](https://github.com/facebook/docusaurus/pull/11077) refactor(live-codeblock): refactor live code block theme components ([@slorber](https://github.com/slorber))
- [#11062](https://github.com/facebook/docusaurus/pull/11062) refactor(theme): introduce CodeBlockContextProvider + split into smaller components ([@slorber](https://github.com/slorber))
- [#11059](https://github.com/facebook/docusaurus/pull/11059) refactor(theme): CodeBlock, centralize metadata parsing + refactor theme component ([@slorber](https://github.com/slorber))
- [#11058](https://github.com/facebook/docusaurus/pull/11058) refactor(theme): refactor CodeBlock parseLines logic + use inline snapshots to ease review ([@slorber]

---

## Translations

- [#11030](https://github.com/facebook/docusaurus/pull/11030) fix(theme-translation): add missing Japanese translation for System Mode ([@tats-u](https://github.com/tats-u))
- [#10893](https://github.com/facebook/docusaurus/pull/10893) fix(theme-translations): Turkish exist language translate completed. ([@ramazansancar](https://github.com/ramazansancar))
- [#10884](https://github.com/facebook/docusaurus/pull/10884) fix(theme-translations): Add missing Polish (pl) theme translations ([@mariuszkrzaczkowski](https://github.com/mariuszkrzaczkowski))
- [#10816](https://github.com/facebook/docusaurus/pull/10816) chore(theme-translations): add missing zh theme translations ([@MisterFISHUP](https://github.com/MisterFISHUP))

## Other changes

Other notable changes include:

- [#10852](https://github.com/facebook/docusaurus/pull/10852) feat(theme): add `versions` attribute to `docsVersionDropdown` navbar item ([@hrumhurum](https://github.com/hrumhurum))

- [#10987](https://github.com/facebook/docusaurus/pull/10987) feat(theme): Allow resetting colorMode to System/OS value ([@slorber](https://github.com/slorber))
- [#10953](https://github.com/facebook/docusaurus/pull/10953) feat(plugin-npm2yarn): Add Bun to default tabs conversions ([@jakeboone02](https://github.com/jakeboone02))
- [#10945](https://github.com/facebook/docusaurus/pull/10945) feat(theme): add theme layout stable CSS classes ([@slorber](https://github.com/slorber))
- [#10846](https://github.com/facebook/docusaurus/pull/10846) feat(theme): code block showLineNumbers=start metastring ([@slorber](https://github.com/slorber))

- [#xxx](https://github.com/facebook/docusaurus/pull/xxx): ???

Check the **[3.8.0 changelog entry](/changelog/3.8.0)** for an exhaustive list of changes.
